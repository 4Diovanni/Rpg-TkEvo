:root{
  --bg:#0b0b0d; /* almost black */
  --panel:#111214;
  --muted:#9aa0a6;
  --text:#e6e6e6;
  --accent:#9b0812; /* sangue */
  --glass: rgba(255,255,255,0.03);
  --card-shadow: 0 8px 30px rgba(0,0,0,0.6);
  --radius:14px;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Helvetica Neue', Arial;
}

.sidebar .summary {
  position: sticky; /* Faz o elemento "grudar" na tela */
  top: 20px; /* Define a distância do topo da tela */
  z-index: 100; /* Garante que o resumo fique acima de outros elementos */
  background-color: var(--panel); /* Mantém o fundo consistente */
  padding: 16px;
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,#070708 0%, #0b0b0d 100%);color:var(--text)}

.wrap{max-width:1200px;margin:28px auto;padding:20px;display:grid;grid-template-columns:1fr 360px;gap:20px}

/* top header */
header.card{grid-column:1/-1;background:linear-gradient(180deg,var(--panel),#0f0f11);padding:16px;border-radius:var(--radius);box-shadow:var(--card-shadow);display:flex;align-items:center;gap:16px}
.profile{display:flex;gap:16px;align-items:center}
.avatar{width:96px;height:96px;border-radius:12px;overflow:hidden;background:var(--glass);display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted);cursor:pointer}
.name-block{line-height:1}
.name-block h1{margin:0;font-size:1.5rem;letter-spacing:0.6px}
.name-block p{margin:4px 0 0;color:var(--muted);font-size:0.95rem}

/* status bar (main requested area) */
.status-bar{display:flex;gap:12px;margin-left:auto;align-items:center}
.stat-pill{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);min-width:110px;text-align:center}
.stat-pill .label{display:block;color:var(--muted);font-size:0.78rem}
.stat-pill .value{font-weight:700;font-size:1.05rem;margin-top:6px;color:var(--text)}
.stat-pill .small{font-size:0.82rem;color:var(--muted);margin-top:4px}

/* main left content */
.card{background:var(--panel);padding:16px;border-radius:12px;box-shadow:var(--card-shadow)}
h2{margin:0 0 10px 0;font-size:1.05rem;color:var(--text)}
label{display:block;font-size:0.85rem;color:var(--muted);margin-bottom:6px}
input[type=text],input[type=number],select,textarea,input[type=date]{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);outline:none}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:12px}

.table{width:100%;border-collapse:collapse;margin-top:8px}
.small-input{width:70px}

.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.attrs-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:8px}
.attrs-row{display:grid;grid-template-columns:1fr 70px 70px 70px 70px;gap:8px;align-items:center}
.skills-grid{display:grid;gap:8px}
.skill-row{display:grid;grid-template-columns:1fr 70px 70px;gap:8px;align-items:center}
.conditions-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:8px;justify-items: start;}
.cond-desc{font-size:0.85rem;color:var(--muted);margin-top:6px}

.inv-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:12px;width: 630px;}
.inv-item{background:rgba(255,255,255,0.02);padding:10px;border-radius:8px}

.btns{display:flex;gap:8px;margin-top:12px}
button{background:var(--accent);color:white;padding:8px 12px;border:none;border-radius:8px;cursor:pointer}
button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}

footer{grid-column:1/-1;text-align:center;margin-top:16px;color:var(--muted);font-size:0.85rem}

@media(max-width:980px){.wrap{grid-template-columns:1fr}.status-bar{margin-top:10px}.card.header{flex-direction:column;align-items:flex-start}.grid-3{grid-template-columns:1fr}.attrs-grid{grid-template-columns:1fr}.conditions-grid{grid-template-columns:1fr}.skills-grid{grid-template-columns:1fr}}

/* Espólios de Batalha */
.espolios-section{margin-top:16px}
.espolios-grid{display:grid;gap:12px;margin-top:8px}
.espolio-card{
  display:flex;align-items:center;gap:12px;padding:12px;height: 96px;border-radius:10px;
  background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);
  transition:all 0.2s ease;
}
.espolio-card:hover{background:rgba(255,255,255,0.04)}
.espolio-meta{flex:1}
.espolio-title{font-weight:700;font-size:0.95rem;margin-bottom:4px}
.espolio-sub{font-size:0.85rem;color:var(--muted);line-height:1.4}
.rank-badge{
  min-width:50px;padding:6px 10px;border-radius:8px;font-weight:700;text-align:center;
  font-size:0.8rem;
}
.rank-1{background:#7f8c8d;color:#fff} /* Ferro */
.rank-2{background:#bfc8d6;color:#111} /* Prata */
.rank-3{background:#f1c40f;color:#111} /* Ouro */
.rank-4{background:#2ecc71;color:#111} /* Esmeralda */
.rank-5{background:#c0392b;color:#fff} /* Ruby */

.espolio-actions{display:flex;gap:8px;align-items:center}
.espolio-btn{
  background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);
  padding:6px 12px;border-radius:8px;cursor:pointer;font-size:0.8rem;
  transition:all 0.2s ease;
}
.espolio-btn:hover{background:rgba(255,255,255,0.05)}
.espolio-btn:disabled{opacity:0.5;cursor:not-allowed}
.espolio-locked{opacity:0.7}
.espolio-active{
  box-shadow:0 0 0 2px rgba(155,8,18,0.25);
  border-color:var(--accent);
  background:rgba(155,8,18,0.05);
}
.espolio-level{font-weight:700;color:var(--accent)}
.espolio-progress{width:80px;padding:4px;border-radius:4px;background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--text)}


/* === AUTOGENERATED RANK SHEEN & DARK SELECTS === */

/* ===== Rank-based metallic sheen (colorido por rank) ===== */

/* cores base por rank (ajuste se quiser outros tons) */
.rank-1 { --metal-a: #8f6b3b;  --metal-b: #c89a60;  --sheen: rgba(255,255,255,0.08); } /* bronze / ferro */
.rank-2 { --metal-a: #c7c7c7;  --metal-b: #f1f1f1;  --sheen: rgba(255,255,255,0.10); } /* prata */
.rank-3 { --metal-a: #d4af37;  --metal-b: #f6e27a;  --sheen: rgba(255,255,255,0.12); } /* ouro */
.rank-4 { --metal-a: #2f9b6f;  --metal-b: #84d3a0;  --sheen: rgba(255,255,255,0.09); } /* esmeralda */
.rank-5 { --metal-a: #8b121a;  --metal-b: #db5a65;  --sheen: rgba(255,255,255,0.11); } /* ruby */

/* estilo base para badges - usar quando .rank-badge tiver também .rank-N classe */
.rank-badge {
  position: relative;
  overflow: hidden;
  color: #0f0f10; /* texto escuro para contraste com brilho */
  border: 1px solid rgba(255,255,255,0.08);
  background: linear-gradient(90deg, var(--metal-a, #cfcfcf) 0%, var(--metal-b, #eee) 50%);
  background-size: 300% 100%;
  box-shadow: 0 6px 18px rgba(0,0,0,0.45), inset 0 2px 6px rgba(255,255,255,0.06);
  border-radius: 8px;
  padding: 6px 10px;
  font-weight: 800;
  transition: transform .35s ease, box-shadow .35s ease;
  -webkit-font-smoothing: antialiased;
}

/* animação de brilho - usa background-position para deslizar o gradiente */
@keyframes metalShineColor {
  0%   { background-position: 200% 0%; filter: saturate(0.96) contrast(1.00); }
  50%  { background-position: 50% 0%;  filter: saturate(1.06) contrast(1.04); }
  100% { background-position: -200% 0%; filter: saturate(0.96) contrast(1.00); }
}

/* pseudo-elemento que cria a faixa de reflexo colorida (usa --sheen) */
.rank-badge::after {
  content: "";
  position: absolute;
  top: -40%;
  left: -70%;
  width: 180%;
  height: 200%;
  background: linear-gradient(120deg, var(--sheen, rgba(255,255,255,0.06)) 0%, rgba(255,255,255,0.02) 10%, rgba(255,255,255,0.0) 30%);
  transform: skewX(-20deg) translateX(-40%);
  pointer-events: none;
  mix-blend-mode: overlay;
  opacity: 0.85;
  animation: sheenMove 3.5s linear infinite;
}

/* movimento do reflexo */
@keyframes sheenMove {
  0%   { transform: skewX(-20deg) translateX(-40%); opacity: 0.9; }
  50%  { transform: skewX(-20deg) translateX(20%);  opacity: 0.5; }
  100% { transform: skewX(-20deg) translateX(70%);  opacity: 0; }
}

/* aplicar animação apenas quando o espólio estiver ativo para destacar */
.espolio-card.espolio-active .rank-badge,
.rank-badge.active {
  animation: metalShineColor 3.2s linear infinite;
}

/* hover polido */
.espolio-card.espolio-active:hover .rank-badge,
.rank-badge.active:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 12px 30px rgba(0,0,0,0.6), inset 0 2px 6px rgba(255,255,255,0.06);
}

/* tamanho / posicionamento: mantém compatibilidade com seu layout existente */
.espolio-card .rank-badge { min-width:54px; text-align:center; display:inline-block }

/* -------- garantir selects & readonly totais no darkmode (repetido / reforço) -------- */
select,
select:focus {
  background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.06);
  color: var(--text);
  padding: 8px;
  border-radius: 8px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(255,255,255,0.06) 50%),
    linear-gradient(135deg, rgba(255,255,255,0.06) 50%, transparent 50%),
    linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02));
  background-position:
    calc(100% - 20px) calc(1em + 2px),
    calc(100% - 15px) calc(1em + 2px),
    0 0;
  background-size: 6px 6px, 6px 6px, 100% 100%;
  background-repeat: no-repeat;
}
select option { background: var(--panel); color: var(--text); }

/* totals / readonly fields escuros */
input[readonly], textarea[readonly], .stat-pill .value {
  background: rgba(255,255,255,0.01);
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--text);
  box-shadow: none;
}

/* ensure rank badges with numeric class get the right color even when nested */
.espolio-card .rank-badge.rank-1 { --metal-a: #8f6b3b; --metal-b: #c89a60; --sheen: rgba(255,255,255,0.06); }
.espolio-card .rank-badge.rank-2 { --metal-a: #c7c7c7; --metal-b: #f1f1f1; --sheen: rgba(255,255,255,0.08); }
.espolio-card .rank-badge.rank-3 { --metal-a: #d4af37; --metal-b: #f6e27a; --sheen: rgba(255,255,255,0.10); }
.espolio-card .rank-badge.rank-4 { --metal-a: #2f9b6f; --metal-b: #84d3a0; --sheen: rgba(255,255,255,0.08); }
.espolio-card .rank-badge.rank-5 { --metal-a: #8b121a; --metal-b: #db5a65; --sheen: rgba(255,255,255,0.10); }



/* ================== Kagune & Inventory polish ================== */
/* Kagune display section */
.kagune-section {
  display: grid;
  grid-template-columns: 260px 1fr;
  gap: 16px;
  align-items: start;
  margin-top: 16px;
}
.kagune-card {
  background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
  border: 1px solid rgba(155,8,18,0.07);
  padding: 14px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.6);
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 220px;
  position: relative;
  overflow: hidden;
}
.kagune-visual {
  height: 150px;
  border-radius: 10px;
  background: linear-gradient(120deg, rgba(155,8,18,0.06), rgba(0,0,0,0.25));
  display:flex;align-items:center;justify-content:center;
  color:var(--muted);font-weight:700;
  position:relative;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,0.02);
}
.kagune-visual img { max-width:100%; max-height:100%; display:block; transform: scale(1); transition: transform .45s cubic-bezier(.2,.9,.25,1);}
.kagune-visual:hover img { transform: scale(1.06) rotate(-1deg); }

/* subtle blood stroke */
.kagune-card::before{
  content: '';
  position: absolute;
  right: -40%;
  top: -30%;
  width: 200%;
  height: 140%;
  background: radial-gradient(ellipse at center, rgba(155,8,18,0.06) 0%, rgba(0,0,0,0.0) 35%);
  transform: rotate(-18deg);
  pointer-events:none;
  mix-blend-mode: overlay;
}

/* stats area */
.kagune-stats {
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:8px;
}
.kagune-stat {
  background: rgba(255,255,255,0.012);
  border: 1px solid rgba(255,255,255,0.03);
  padding:8px 10px;border-radius:8px;
  display:flex;align-items:center;justify-content:space-between;
  color:var(--text);
}
.kagune-stat .label{ color:var(--muted); font-size:0.85rem; }
.kagune-stat .value{ font-weight:800; color:var(--accent); }

/* action row */
.kagune-actions { display:flex; gap:8px; margin-top:6px; }
.kagune-actions .btn { padding:8px 10px; border-radius:10px; font-weight:700; background: linear-gradient(180deg,var(--accent), #7a0b0b); box-shadow: none; }

/* Inventory panel */
.inventory-panel {
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  border-radius: 12px;
  padding: 12px;
  border: 1px solid rgba(155,8,18,0.06);
  box-shadow: 0 12px 30px rgba(0,0,0,0.6);
}
.inv-grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap:12px;
  align-items: start;
}
.inv-item {
  background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(0,0,0,0.05));
  border: 1px solid rgba(255,255,255,0.03);
  padding:10px;
  border-radius:10px;
  display:flex;gap:10px;align-items:flex-start;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.inv-item:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.6);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
}
.inv-thumb {
  width:56px;height:56px;border-radius:8px;flex:0 0 56px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08));display:flex;align-items:center;justify-content:center;color:var(--muted);font-weight:700;border:1px solid rgba(255,255,255,0.03)
}
.inv-meta { display:flex;flex-direction:column; gap:6px; flex:1 }
.inv-title { font-weight:800; color:var(--text); font-size:0.95rem; }
.inv-sub { color:var(--muted); font-size:0.85rem; }

/* rarity tag on item (small badge) */
.item-badge { padding:6px 8px;border-radius:999px;font-weight:800;font-size:0.75rem; color:#111; background: linear-gradient(90deg, var(--metal-a, #c7c7c7), var(--metal-b, #f1f1f1)); box-shadow: inset 0 1px 0 rgba(255,255,255,0.08); align-self:flex-start; }

/* long text safety */
.kagune-card, .inv-item, .inv-meta { word-break: break-word; overflow-wrap: anywhere; }

/* responsive adjustments */
@media(max-width:980px){
  .kagune-section{grid-template-columns:1fr; }
  .inv-grid{ grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
}

/* subtle blood drip accent on selected item */
.inv-item.selected {
  border-color: rgba(155,8,18,0.22);
  box-shadow: 0 20px 40px rgba(155,8,18,0.08), inset 0 -6px 20px rgba(155,8,18,0.03);
  background: linear-gradient(180deg, rgba(155,8,18,0.02), rgba(0,0,0,0.06));
}

/* small helper for stat pills inside kagune card */
.kagune-pill { background: rgba(255,255,255,0.02); padding:6px 8px; border-radius:999px; border:1px solid rgba(255,255,255,0.03); font-weight:700; color:var(--text); font-size:0.85rem; }



/* ================== UI IMPROVEMENTS - Dark, compact, readable ==================
   Goals:
   - Fix inventory header vertical text issue by forcing normal text flow.
   - Improve spacing, alignment and responsive behavior across the sheet.
   - Make inputs, selects and readonly totals clearly visible in dark mode.
   - Tidy icon/thumb areas and make the inventory grid uniform.
   - Add subtle transitions and accessible focus states.
*/

/* Force normal writing mode for form labels, table headers and small badges */
.espolio-title, label, th, .inv-item label, .inv-item .field-label, .inv-item .inv-title {
  writing-mode: horizontal-tb !important;
  transform: none !important;
  white-space: normal !important;
  text-orientation: mixed !important;
  line-height: 1.15 !important;
}

/* Inventory card layout: column layout for fields */
.inv-item {
    display: grid !important;
    grid-template-columns: 56px -1fr 80px;
    gap: 10px;
    min-height: 86px;
    padding: 12px;
    justify-items: start;
}

/* Thumb restricted size */
.inv-thumb { width:56px;height:56px; border-radius:8px; }

/* Meta area uses vertical stacking */
.inv-meta { display:flex; flex-direction:column; gap:6px; align-items:flex-start; }

/* Make the long labels appear above the inputs for clarity */
.inv-meta .label-row { display:flex; gap:8px; align-items:center; width:100%; }
.inv-meta .label-row .field-label { font-size:0.82rem; color:var(--muted); min-width:0; flex:1; }
.inv-meta .inv-desc { color:var(--muted); font-size:0.85rem; margin-top:4px; max-height:64px; overflow:auto; }

/* Right-most column for stats or damage numbers */
.inv-meta .inv-stats { display:flex; flex-direction:column; gap:6px; align-items:flex-end; font-weight:700; color:var(--text); }

/* Inputs inside inventory item */
.inv-item input, .inv-item select, .inv-item textarea {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.04);
  padding:6px 8px;
  border-radius:8px;
  color:var(--text);
  width:100%;
  box-shadow:none;
}

/* Make select dropdowns darker and consistent */
select, input[type="text"], input[type="number"], textarea {
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.04);
  color: var(--text);
}

/* Readonly / totals */
input[readonly], textarea[readonly] {
  background: rgba(255,255,255,0.01);
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--text);
}

/* Make stat pills more compact */
.stat-pill { min-width: 96px; padding:10px 12px; border-radius:10px; font-size:0.92rem; }

/* Tidy attributes grid: avoid narrow columns */
.attrs-row { grid-template-columns: 1fr 78px 78px 78px; gap:10px; align-items:center; }

/* Skills rows: ensure labels don't wrap awkwardly */
.skill-row > div { white-space:normal; font-size:0.95rem; }
.skill-row input { text-align:center; }

/* Make espólios cards more compact and allow 6 visible as requested */
.espolios-grid { display:grid; grid-template-columns: repeat(1,1fr); gap:10px; max-height: calc(6 * 112px + 40px); overflow:auto; padding-right:6px; }
@media(min-width:1100px){ .espolios-grid { grid-template-columns: 1fr; } }

/* Espólio card minor improvements */
.espolio-card { height:auto; padding:12px; align-items:flex-start; gap:12px; }
.espolio-meta { min-width:0; }
.espolio-sub { display:block; max-height:56px; overflow:hidden; text-overflow:ellipsis; }

/* sidebar espólios box smaller */
.sidebar-espolio-card { padding:10px; border-radius:10px; }

/* Focus states for accessibility */
input:focus, select:focus, textarea:focus, .espolio-btn:focus, button:focus {
  outline: 2px solid rgba(155,8,18,0.22);
  outline-offset: 2px;
}

/* Slightly increase contrast for muted text where needed */
:root { --muted: #9da3a9; --panel: #0f1012; --card-shadow: 0 12px 36px rgba(0,0,0,0.7); }

/* Reduce excessive uppercase/letter-spacing if present */
h2, .espolio-title, .inv-title { text-transform:none; letter-spacing:0em; }

/* Ensure the header and inputs scale properly in small screens */
@media(max-width:980px){
  .inv-grid { grid-template-columns: repeat(1,1fr); }
  .inv-item { grid-template-columns: 56px -1fr; grid-auto-rows: auto; }
  .attrs-row { grid-template-columns: 1fr 70px 70px 70px; }
}

/* Small utility - make long text fields scroll inside card rather than break layout */
.kagune-card .kagune-visual, .inv-meta .inv-desc { max-height:150px; overflow:auto; }

/* restore default cursor for disabled buttons */
.espolio-btn[disabled] { cursor: not-allowed; opacity:0.7; }

/* end of UI improvements */
